<!DOCTYPE HTML>
<html lang="en" data-ng-app="api">

  <head>
    <title>HRX API</title>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width = 320,
       initial-scale = 1, user-scalable = no,  minimal-ui">
    <link rel="stylesheet" type="text/css" href="/views/css/style.css" media="all">
    <link rel="stylesheet" href="/views/css/ionicons.css">
    <link rel="stylesheet" href="/views/css/ionicons.min.css">
  </head>

  <body id="main">

    <div class="main_container">

      <h1>HRX API</h1>
      <h3>

        Welcome to the HRX api. Right here you will be able to see all the companies and users that HRX currently holds. For more specific accesses please use the iPhone app soon available on the Apple store.
      </h3>

      <hr>
      <div ng-controller="ListCtrl">
        <h2>Companies ({{companies.length}}) - <input type="text" placeholder="Search by name, industry and more ..." ng-model="company_search"/></h2>
        <ul>
          <li ng-repeat="company in companies | filter: company_search | orderBy: company.name | limitTo: 20" ng-init="company[ $index ] = true">
            <span>{{company.name}}</span> - {{company.industry}}
            <span ng-hide="company.address && company.latitude" class="company_not_edited">[TO DO]</span><span class="ion-edit" ng-click="company[ $index ] = !company[ $index ]"></span>
            <div ng-show="company[ $index ]" style="background-color: red; width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;">


            logo - {{company.logo}}<br>
            <h3>{{company.name}}</h3>
            industry - {{company.industry}}<br>
            size - {{company.size}}<br>
            type - {{company.type}}<br>
            www - {{company.www}}<br>
            address - {{company.address}}<br>
            latitude - {{company.latitude}}<br>
            longitude - {{company.longitude}}<br>


            <div style="height: 400px;" id="map"></div>


              <span style="position: absolute; bottom: 10px; right: 10px;" class="ion-close" ng-click="company[ $index ] = !company[ $index ]"></span>
            </div>
          </li>
        </ul>

        <hr>

        <h2>HR Alumn ({{new_users.length}}) - <input type="text" placeholder="Search by name, cohort and more ..." ng-model="alumni_search"/></h2>
        <ul>

          <li ng-repeat="user in new_users | filter: alumni_search | orderBy: user.full_name | limitTo: 10"><span title="{{user.username}}">{{user.full_name}}</span> - (HR{{user.cohort}})</li>
        </ul>
        <hr>

        <h2>HR Chapters ({{hr_chapters.length}})</h2>
        <ul>

          <li ng-repeat="chapter in hr_chapters | orderBy: chapter.name"><span>{{chapter.name}}</span> - {{chapter.location}}</li>
        </ul>

      </div>

    </div>

    <!-- ANGULAR SETUP -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular.min.js"></script>

    <!-- ANGULAR DEPENDENCIES -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular-route.min.js"></script>

    <!-- ANGULAR STRUCTURE -->
    <script src="modules/core/core.js"></script>
    <script src="modules/core/directives/hello_dir.js"></script>
    <script src="modules/core/controllers/ListCtrl.js"></script>
    <script>
      var new_users = <%- JSON.stringify( new_users ) %>;
      var companies = <%- JSON.stringify( companies ) %>;
      var hr_chapters = <%- JSON.stringify( hr_chapters ) %>;

      angular.module('api.constants', [])
        .constant('New_users_const', new_users)
        .constant('Companies_const', companies)
        .constant('HR_chapters_const', hr_chapters);
    </script>

    <script type="text/javascript">

      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: { lat: -34.397, lng: 150.644 },
          zoom: 8
        });
      }

    </script>

    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD00pGN4gphf_ktZnjzId0wAz8s9Ul8HsY&callback=initMap">
    </script>

  </body>

</html>
